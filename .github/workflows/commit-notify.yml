# –ò–º—è –Ω–∞—à–µ–≥–æ workflow
name: Telegram Notification on Push

# –¢—Ä–∏–≥–≥–µ—Ä: –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –≤–µ—Ç–∫—É main
# –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—Ç–æ–∫: branches: [ main, develop ]
# –ò–ª–∏ –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ç–æ–∫: on: [push]
on:
  push:
    branches:
      - main

# –ó–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è
jobs:
  send_notification:
    # –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞ —Å–≤–µ–∂–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ Ubuntu
    runs-on: ubuntu-latest
    steps:
      # –®–∞–≥ 1: –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–º–∏—Ç–µ
      - name: Get commit information
        uses: actions/checkout@v3
        with:
          fetch-depth: 0 # –ù—É–∂–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

      # –®–∞–≥ 2: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
      - name: Send Telegram notification
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—ã–π Action, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É
        uses: appleboy/telegram-action@master
        with:
          # –£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è –∏ —Ç–æ–∫–µ–Ω –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          
          # –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTML)
          format: html

          # –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ GitHub –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏
          message: |
            <b>–ù–æ–≤—ã–π –∫–æ–º–º–∏—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ üöÄ</b>
            
            <b>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:</b> ${{ github.repository }}
            <b>–í–µ—Ç–∫–∞:</b> ${{ github.ref_name }}
            <b>–ê–≤—Ç–æ—Ä:</b> ${{ github.actor }}
            
            <b>–°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞:</b>
            ${{ github.event.head_commit.message }}
            
            <a href="${{ github.server_url }}/${{ github.repository }}/commit/${{ github.sha }}">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–º–º–∏—Ç</a>